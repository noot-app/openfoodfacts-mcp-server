#!/usr/bin/env bash

set -euo pipefail

source script/env "$@"

function usage() {
    echo "Usage: $0 [--clean]"
    echo ""
    echo "Without options, starts the server with the existing database."
    echo "This script will automatically pull down a fresh parquet file if one does not already exist at ./data"
}

function start_server() {
    echo -e "${BLUE}üöÄ Starting server...${OFF}"
    
    go run ./cmd/openfoodfacts-mcp-server/main.go
}

# Parse command line arguments
case "${1:-}" in
    --help|-h|help)
        usage
        ;;
    "")
        start_server
        ;;
    *)
        echo -e "${RED}‚ùå Unknown option: $1${OFF}"
        echo ""
        usage
        ;;
esac
